!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="./",e(e.s=0)}([function(t,n,e){"use strict";function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}e.r(n);var i=function(){function t(n,e,r,i,o){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.training=n,this.config=e,this.shapeData=r,this.checkpointData=i,this.playing=o,this.config.hiddenLayerSizes=this.toNativeArray(this.config.hiddenLayerSizes)}var n,e,i;return n=t,(e=[{key:"run",value:function(){this.training.create(this.config,this.shapeData),this.checkpointData&&(this.training.load(this.checkpointData),this.checkpointData=null,console.log("Load checkpoint"));for(var t=Date.now(),n=t,e=0,r=0,i=0,o=0,a=0;;){if(r<this.config.totalSteps&&!this.playing){if(r<this.config.trainingStartSteps||r%this.config.trainingInterval!==0||i===this.config.trainingInterval){var s=this.training.step();o+=s.reward,s.done&&(a=o,o=0),i=0,++r%this.config.checkpointSteps===0&&(this.checkpointData=this.training.save())}else this.training.train(),i++;e=Math.floor((Date.now()-t)/1e3)}var u=Date.now(),c=u-n;if(c>=40){c>1e3?n=u:n+=40;var f=this.training.evaluate(),l=this.fromNativeState(f);postMessage([r,a,e,l,this.checkpointData]),this.checkpointData=null}}}},{key:"toNativeArray",value:function(t){var n=new this.training.IntArray;n.resize(t.length,0);for(var e=0;e<t.length;e++)n.set(e,t[e]);return n}},{key:"fromNativeState",value:function(t){for(var n={goalPosition:[t.goalPosition.x,t.goalPosition.y,t.goalPosition.z],transforms:[]},e=0;e<t.transforms.size();e++){var r=t.transforms.get(e);n.transforms.push({position:[r.position.x,r.position.y,r.position.z],orientation:[r.orientation.x,r.orientation.y,r.orientation.z,r.orientation.w]})}return n}}])&&r(n.prototype,e),i&&r(n,i),t}();function o(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==e)return;var r,i,o=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}(t,n)||function(t,n){if(!t)return;if("string"===typeof t)return a(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return a(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}onmessage=function(t){var n=o(t.data,4),e=n[0],r=n[1],a=n[2],s=n[3];self.importScripts("training.js"),Training().then((function(t){new i(t,e,r,a,s).run()}))}}]);
//# sourceMappingURL=Worker.worker.31d139a7.worker.js.map